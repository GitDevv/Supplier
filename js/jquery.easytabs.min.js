!function(e){e.easytabs=function(a,t){var l,r,o,c,d,f,s=this,i=e(a),n={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:i},u={fast:200,normal:400,slow:600};s.init=function(){s.settings=f=e.extend({},n,t),f.bind_str=f.event+".easytabs",f.uiTabs&&(f.tabActiveClass="ui-tabs-selected",f.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",f.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",f.tabClass="ui-state-default ui-corner-top",f.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),f.collapsible&&void 0!==t.defaultTab&&void 0===t.collpasedByDefault&&(f.collapsedByDefault=!1),"string"==typeof f.animationSpeed&&(f.animationSpeed=u[f.animationSpeed]),e("a.anchor").remove().prependTo("body"),i.data("easytabs",{}),s.setTransitions(),s.getTabs(),h(),b(),g(),w(),$(),i.attr("data-easytabs",!0)},s.setTransitions=function(){o=f.animate?{show:f.transitionIn,hide:f.transitionOut,speed:f.animationSpeed,collapse:f.transitionCollapse,uncollapse:f.transitionUncollapse,halfSpeed:f.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},s.getTabs=function(){var a;s.tabs=i.find(f.tabs),s.panels=e(),s.tabs.each(function(){var t=e(this),i=t.children("a"),n=t.children("a").data("target");t.data("easytabs",{}),void 0!==n&&null!==n?t.data("easytabs").ajax=i.attr("href"):n=i.attr("href"),n=n.match(/#([^\?]+)/)[1],a=f.panelContext.find("#"+n),a.length?(a.data("easytabs",{position:a.css("position"),visibility:a.css("visibility")}),a.not(f.panelActiveClass).hide(),s.panels=s.panels.add(a),t.data("easytabs").panel=a):(s.tabs=s.tabs.not(t),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+n+"' removed from set"))})},s.selectTab=function(e,a){var t=window.location,n=(t.hash.match(/^[^\?]*/)[0],e.parent().data("easytabs").panel),l=e.parent().data("easytabs").ajax;f.collapsible&&!d&&(e.hasClass(f.tabActiveClass)||e.hasClass(f.collapsedClass))?s.toggleTabCollapse(e,n,l,a):e.hasClass(f.tabActiveClass)&&n.hasClass(f.panelActiveClass)?f.cache||m(e,n,l,a):m(e,n,l,a)},s.toggleTabCollapse=function(e,a,t,n){s.panels.stop(!0,!0),p(i,"easytabs:before",[e,a,f])&&(s.tabs.filter("."+f.tabActiveClass).removeClass(f.tabActiveClass).children().removeClass(f.tabActiveClass),e.hasClass(f.collapsedClass)?(!t||f.cache&&e.parent().data("easytabs").cached||(i.trigger("easytabs:ajax:beforeSend",[e,a]),a.load(t,function(t,s,n){e.parent().data("easytabs").cached=!0,i.trigger("easytabs:ajax:complete",[e,a,t,s,n])})),e.parent().removeClass(f.collapsedClass).addClass(f.tabActiveClass).children().removeClass(f.collapsedClass).addClass(f.tabActiveClass),a.addClass(f.panelActiveClass)[o.uncollapse](o.speed,f.transitionUncollapseEasing,function(){i.trigger("easytabs:midTransition",[e,a,f]),"function"==typeof n&&n()})):(e.addClass(f.collapsedClass).parent().addClass(f.collapsedClass),a.removeClass(f.panelActiveClass)[o.collapse](o.speed,f.transitionCollapseEasing,function(){i.trigger("easytabs:midTransition",[e,a,f]),"function"==typeof n&&n()})))},s.matchTab=function(e){return s.tabs.find("[href='"+e+"'],[data-target='"+e+"']").first()},s.matchInPanel=function(e){return e&&s.validId(e)?s.panels.filter(":has("+e+")").first():[]},s.validId=function(e){return e.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)},s.selectTabFromHashChange=function(){var t,e=window.location.hash.match(/^[^\?]*/)[0],a=s.matchTab(e);f.updateHash&&(a.length?(d=!0,s.selectTab(a)):(t=s.matchInPanel(e),t.length?(e="#"+t.attr("id"),a=s.matchTab(e),d=!0,s.selectTab(a)):l.hasClass(f.tabActiveClass)||f.cycle||(""===e||s.matchTab(c).length||i.closest(e).length)&&(d=!0,s.selectTab(r))))},s.cycleTabs=function(a){f.cycle&&(a%=s.tabs.length,$tab=e(s.tabs[a]).children("a").first(),d=!0,s.selectTab($tab,function(){setTimeout(function(){s.cycleTabs(a+1)},f.cycle)}))},s.publicMethods={select:function(a){var t;0===(t=s.tabs.filter(a)).length?0===(t=s.tabs.find("a[href='"+a+"']")).length&&0===(t=s.tabs.find("a"+a)).length&&0===(t=s.tabs.find("[data-target='"+a+"']")).length&&0===(t=s.tabs.find("a[href$='"+a+"']")).length&&e.error("Tab '"+a+"' does not exist in tab set"):t=t.children("a").first(),s.selectTab(t)}};var p=function(a,t,s){var i=e.Event(t);return a.trigger(i,s),i.result!==!1},h=function(){i.addClass(f.containerClass),s.tabs.parent().addClass(f.tabsClass),s.tabs.addClass(f.tabClass),s.panels.addClass(f.panelClass)},b=function(){var i,a=window.location.hash.match(/^[^\?]*/)[0],t=s.matchTab(a).parent();1===t.length?(l=t,f.cycle=!1):(i=s.matchInPanel(a),i.length?(a="#"+i.attr("id"),l=s.matchTab(a).parent()):(l=s.tabs.parent().find(f.defaultTab),0===l.length&&e.error("The specified default tab ('"+f.defaultTab+"') could not be found in the tab set ('"+f.tabs+"') out of "+s.tabs.length+" tabs."))),r=l.children("a").first(),v(t)},v=function(a){var t,s;f.collapsible&&0===a.length&&f.collapsedByDefault?l.addClass(f.collapsedClass).children().addClass(f.collapsedClass):(t=e(l.data("easytabs").panel),s=l.data("easytabs").ajax,!s||f.cache&&l.data("easytabs").cached||(i.trigger("easytabs:ajax:beforeSend",[r,t]),t.load(s,function(e,a,s){l.data("easytabs").cached=!0,i.trigger("easytabs:ajax:complete",[r,t,e,a,s])})),l.data("easytabs").panel.show().addClass(f.panelActiveClass),l.addClass(f.tabActiveClass).children().addClass(f.tabActiveClass)),i.trigger("easytabs:initialised",[r,t])},g=function(){s.tabs.children("a").bind(f.bind_str,function(a){f.cycle=!1,d=!1,s.selectTab(e(this)),a.preventDefault?a.preventDefault():a.returnValue=!1})},m=function(e,a,t,n){if(s.panels.stop(!0,!0),p(i,"easytabs:before",[e,a,f])){var u,h,b,v,l=s.panels.filter(":visible"),r=a.parent(),g=window.location.hash.match(/^[^\?]*/)[0];f.animate&&(u=y(a),h=l.length?C(l):0,b=u-h),c=g,v=function(){i.trigger("easytabs:midTransition",[e,a,f]),f.animate&&"fadeIn"==f.transitionIn&&0>b&&r.animate({height:r.height()+b},o.halfSpeed).css({"min-height":""}),f.updateHash&&!d?window.location.hash="#"+a.attr("id"):d=!1,a[o.show](o.speed,f.transitionInEasing,function(){r.css({height:"","min-height":""}),i.trigger("easytabs:after",[e,a,f]),"function"==typeof n&&n()})},!t||f.cache&&e.parent().data("easytabs").cached||(i.trigger("easytabs:ajax:beforeSend",[e,a]),a.load(t,function(t,s,n){e.parent().data("easytabs").cached=!0,i.trigger("easytabs:ajax:complete",[e,a,t,s,n])})),f.animate&&"fadeOut"==f.transitionOut&&(b>0?r.animate({height:r.height()+b},o.halfSpeed):r.css({"min-height":r.height()})),s.tabs.filter("."+f.tabActiveClass).removeClass(f.tabActiveClass).children().removeClass(f.tabActiveClass),s.tabs.filter("."+f.collapsedClass).removeClass(f.collapsedClass).children().removeClass(f.collapsedClass),e.parent().addClass(f.tabActiveClass).children().addClass(f.tabActiveClass),s.panels.filter("."+f.panelActiveClass).removeClass(f.panelActiveClass),a.addClass(f.panelActiveClass),l.length?l[o.hide](o.speed,f.transitionOutEasing,v):a[o.uncollapse](o.speed,f.transitionUncollapseEasing,v)}},y=function(a){if(a.data("easytabs")&&a.data("easytabs").lastHeight)return a.data("easytabs").lastHeight;var s,i,t=a.css("display");try{s=e("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(n){s=e("<div></div>",{visibility:"hidden",overflow:"hidden"})}return i=a.wrap(s).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),a.unwrap(),a.css({position:a.data("easytabs").position,visibility:a.data("easytabs").visibility,display:t}),a.data("easytabs").lastHeight=i,i},C=function(e){var a=e.outerHeight();return e.data("easytabs")?e.data("easytabs").lastHeight=a:e.data("easytabs",{lastHeight:a}),a},w=function(){"function"==typeof e(window).hashchange?e(window).hashchange(function(){s.selectTabFromHashChange()}):e.address&&"function"==typeof e.address.change&&e.address.change(function(){s.selectTabFromHashChange()})},$=function(){var e;f.cycle&&(e=s.tabs.index(l),setTimeout(function(){s.cycleTabs(e+1)},f.cycle))};s.init()},e.fn.easytabs=function(a){var t=arguments;return this.each(function(){var s=e(this),i=s.data("easytabs");return void 0===i&&(i=new e.easytabs(this,a),s.data("easytabs",i)),i.publicMethods[a]?i.publicMethods[a](Array.prototype.slice.call(t,1)):void 0})}}(jQuery);